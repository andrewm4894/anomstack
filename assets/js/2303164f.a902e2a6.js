"use strict";(self.webpackChunkanomstack=self.webpackChunkanomstack||[]).push([[70],{8516:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"deployment/fly","title":"Fly.io Deployment","description":"Deploy Anomstack to Fly.io for a production-ready, scalable anomaly detection platform in the cloud.","source":"@site/docs/deployment/fly.md","sourceDirName":"deployment","slug":"/deployment/fly","permalink":"/anomstack/docs/deployment/fly","draft":false,"unlisted":false,"editUrl":"https://github.com/andrewm4894/anomstack/tree/main/docs/docs/deployment/fly.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Goolge Cloud Platform","permalink":"/anomstack/docs/deployment/gcp"},"next":{"title":"Storage Optimization","permalink":"/anomstack/docs/storage-optimization"}}');var l=s(4848),r=s(8453);const a={sidebar_position:3},t="Fly.io Deployment",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Security Model",id:"security-model",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install Fly CLI",id:"install-fly-cli",level:3},{value:"Login to Fly.io",id:"login-to-flyio",level:3},{value:"Quick Deployment",id:"quick-deployment",level:2},{value:"1. Clone Repository",id:"1-clone-repository",level:3},{value:"2. Set Up Environment Variables",id:"2-set-up-environment-variables",level:3},{value:"3. Preview Deployment (Optional)",id:"3-preview-deployment-optional",level:3},{value:"4. Deploy",id:"4-deploy",level:3},{value:"5. Access Your Instance",id:"5-access-your-instance",level:3},{value:"Manual Deployment",id:"manual-deployment",level:2},{value:"1. Create Fly.io App",id:"1-create-flyio-app",level:3},{value:"2. Set Up Database",id:"2-set-up-database",level:3},{value:"3. Create Persistent Volume",id:"3-create-persistent-volume",level:3},{value:"4. Configure Secrets (Optional)",id:"4-configure-secrets-optional",level:3},{value:"5. Deploy",id:"5-deploy",level:3},{value:"Configuration Files",id:"configuration-files",level:2},{value:"<code>fly.toml</code> - App Configuration",id:"flytoml---app-configuration",level:3},{value:"<code>nginx.conf</code> - Reverse Proxy with Auth",id:"nginxconf---reverse-proxy-with-auth",level:3},{value:"<code>dagster_fly.yaml</code> - PostgreSQL Configuration",id:"dagster_flyyaml---postgresql-configuration",level:3},{value:"Customizing Your Deployment",id:"customizing-your-deployment",level:2},{value:"Change Admin Credentials",id:"change-admin-credentials",level:3},{value:"Add Custom Metrics",id:"add-custom-metrics",level:3},{value:"Scale Your Deployment",id:"scale-your-deployment",level:3},{value:"Monitoring &amp; Maintenance",id:"monitoring--maintenance",level:2},{value:"View Application Logs",id:"view-application-logs",level:3},{value:"Health Monitoring",id:"health-monitoring",level:3},{value:"Database Management",id:"database-management",level:3},{value:"Storage &amp; Data Management",id:"storage--data-management",level:2},{value:"Persistent Volumes",id:"persistent-volumes",level:3},{value:"Data Backup",id:"data-backup",level:3},{value:"Cost Optimization",id:"cost-optimization",level:2},{value:"Resource Planning",id:"resource-planning",level:3},{value:"Optimization Tips",id:"optimization-tips",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Services Not Starting",id:"services-not-starting",level:4},{value:"Authentication Not Working",id:"authentication-not-working",level:4},{value:"Database Connection Issues",id:"database-connection-issues",level:4},{value:"Volume/Storage Issues",id:"volumestorage-issues",level:4},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Multi-Region Deployment",id:"multi-region-deployment",level:3},{value:"Custom Domains",id:"custom-domains",level:3},{value:"External Data Sources",id:"external-data-sources",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"From Docker Compose",id:"from-docker-compose",level:3},{value:"From Other Platforms",id:"from-other-platforms",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Related Resources",id:"related-resources",level:2},{value:"Smart Environment Variable Management",id:"smart-environment-variable-management",level:2},{value:"\ud83e\udde0 Automatic Filtering",id:"-automatic-filtering",level:3},{value:"\ud83d\udd12 Fly.io Overrides",id:"-flyio-overrides",level:3},{value:"\ud83d\udd10 Security Features",id:"-security-features",level:3},{value:"\ud83d\udca1 Usage Examples",id:"-usage-examples",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"flyio-deployment",children:"Fly.io Deployment"})}),"\n",(0,l.jsx)(n.p,{children:"Deploy Anomstack to Fly.io for a production-ready, scalable anomaly detection platform in the cloud."}),"\n",(0,l.jsxs)(n.admonition,{title:"Live Demo",type:"tip",children:[(0,l.jsxs)(n.p,{children:["\ud83d\ude80 ",(0,l.jsx)(n.strong,{children:"See it in action"}),": ",(0,l.jsx)(n.a,{href:"https://anomstack-demo.fly.dev",children:"https://anomstack-demo.fly.dev"})]}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcca Public Dashboard"}),": Try the Anomstack interface (no login required)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udd10 Admin Interface"}),": ",(0,l.jsx)(n.a,{href:"https://anomstack-demo.fly.dev/dagster",children:"/dagster"})," (configurable admin credentials)"]}),"\n"]})]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://fly.io/",children:"Fly.io"})," is a modern cloud platform that runs your applications close to your users. This deployment gives you:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83c\udf10 Public Demo Interface"}),": Shareable anomaly detection dashboard"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udd10 Protected Admin UI"}),": Secure access to orchestration controls"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udce1 Global Edge Deployment"}),": Run close to your data sources worldwide"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u26a1 Auto-scaling"}),": Scale up/down based on demand"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\uddc4\ufe0f Managed PostgreSQL"}),": Fully managed database with automatic backups"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udce6 Persistent Volumes"}),": Reliable storage for metrics and models"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcb0 Simple Pricing"}),": Pay only for what you use"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsxs)(n.p,{children:["Our Fly.io deployment uses ",(0,l.jsx)(n.strong,{children:"nginx reverse proxy"})," with ",(0,l.jsx)(n.strong,{children:"authentication-based routing"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Public Internet"\n        USERS[\ud83d\udc65 Users]\n        ADMIN[\ud83d\udd10 Admin Users]\n    end\n    \n    subgraph "Fly.io Edge (nginx)"\n        PROXY[nginx Reverse Proxy<br/>Port 80/443]\n    end\n    \n    subgraph "Fly.io VM Container"\n        DASH[\ud83d\udcca Dashboard<br/>Port 8080<br/><i>Public</i>]\n        WEB[\u2699\ufe0f Dagster Webserver<br/>Port 3000<br/><i>Protected</i>]\n        DAEMON[\ud83d\udd04 Dagster Daemon<br/>Background Jobs]\n        CODE[\ud83d\udce6 Code Server<br/>Port 4000<br/>Internal]\n    end\n    \n    subgraph "Fly.io Services"\n        PG[(\ud83d\uddc4\ufe0f Managed PostgreSQL)]\n        VOL[\ud83d\udce6 Persistent Volume<br/>10GB]\n    end\n    \n    USERS --\x3e PROXY\n    ADMIN --\x3e PROXY\n    PROXY --\x3e|/ (no auth)| DASH\n    PROXY --\x3e|/dagster (basic auth)| WEB\n    WEB --\x3e CODE\n    DAEMON --\x3e CODE\n    WEB --\x3e PG\n    DAEMON --\x3e PG\n    CODE --\x3e VOL\n'})}),"\n",(0,l.jsx)(n.h3,{id:"security-model",children:"Security Model"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"nginx handles all routing and authentication:"})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Path"}),(0,l.jsx)(n.th,{children:"Access"}),(0,l.jsx)(n.th,{children:"Target"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"/"})}),(0,l.jsxs)(n.td,{children:["\ud83c\udf10 ",(0,l.jsx)(n.strong,{children:"Public"})]}),(0,l.jsx)(n.td,{children:"Dashboard (8080)"}),(0,l.jsx)(n.td,{children:"Anomaly detection interface"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"/dagster"})}),(0,l.jsxs)(n.td,{children:["\ud83d\udd10 ",(0,l.jsx)(n.strong,{children:"Protected"})]}),(0,l.jsx)(n.td,{children:"Webserver (3000)"}),(0,l.jsx)(n.td,{children:"Orchestration controls"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"/graphql"})}),(0,l.jsxs)(n.td,{children:["\ud83d\udd10 ",(0,l.jsx)(n.strong,{children:"Protected"})]}),(0,l.jsx)(n.td,{children:"Webserver (3000)"}),(0,l.jsx)(n.td,{children:"Dagster API endpoints"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"/_next/*"})}),(0,l.jsxs)(n.td,{children:["\ud83d\udd10 ",(0,l.jsx)(n.strong,{children:"Protected"})]}),(0,l.jsx)(n.td,{children:"Webserver (3000)"}),(0,l.jsx)(n.td,{children:"Static assets"})]})]})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Authentication"}),": Basic HTTP Auth (configurable via environment variables, defaults to ",(0,l.jsx)(n.code,{children:"admin"})," / ",(0,l.jsx)(n.code,{children:"anomstack2024"}),")"]}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Fly.io Account"}),": Sign up at ",(0,l.jsx)(n.a,{href:"https://fly.io",children:"fly.io"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Fly CLI"}),": Install the Fly.io CLI tool"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Git"}),": For cloning the repository"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"install-fly-cli",children:"Install Fly CLI"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install flyctl\n\n# Linux/WSL\ncurl -L https://fly.io/install.sh | sh\n\n# Windows\niwr https://fly.io/install.ps1 -useb | iex\n"})}),"\n",(0,l.jsx)(n.h3,{id:"login-to-flyio",children:"Login to Fly.io"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"fly auth login\n"})}),"\n",(0,l.jsx)(n.h2,{id:"quick-deployment",children:"Quick Deployment"}),"\n",(0,l.jsx)(n.p,{children:"The fastest way to get your own Anomstack instance:"}),"\n",(0,l.jsx)(n.h3,{id:"1-clone-repository",children:"1. Clone Repository"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/andrewm4894/anomstack.git\ncd anomstack\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-set-up-environment-variables",children:"2. Set Up Environment Variables"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"New! \ud83c\udf89 Automatic .env Integration"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Copy example environment file\ncp .example.env .env\n\n# Edit with your actual values\nnano .env  # or vim .env, code .env, etc.\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example .env file:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Your actual secrets\nANOMSTACK_ALERT_EMAIL_FROM=alerts@mycompany.com\nANOMSTACK_ALERT_EMAIL_TO=team@mycompany.com\nANOMSTACK_ALERT_EMAIL_PASSWORD=my-gmail-app-password\n\nANOMSTACK_SLACK_BOT_TOKEN=xoxb-your-slack-token\nANOMSTACK_SLACK_CHANNEL=#anomalies\n\nANOMSTACK_OPENAI_KEY=sk-your-openai-key\n\n# Custom admin credentials\nANOMSTACK_ADMIN_USERNAME=myadmin\nANOMSTACK_ADMIN_PASSWORD=super-secure-password-123\n\n# Database connections\nANOMSTACK_SNOWFLAKE_ACCOUNT=my-account\nANOMSTACK_SNOWFLAKE_USER=anomstack_user\nANOMSTACK_SNOWFLAKE_PASSWORD=my-snowflake-password\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-preview-deployment-optional",children:"3. Preview Deployment (Optional)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# See what environment variables will be set as Fly secrets\n./scripts/deployment/preview_fly_secrets.sh\n"})}),"\n",(0,l.jsx)(n.p,{children:"This shows you:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Variables that WILL be deployed"})," (API keys, passwords, etc.)"]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83c\udfe0 ",(0,l.jsx)(n.strong,{children:"Variables that will be SKIPPED"})," (local development paths)"]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83d\udd12 ",(0,l.jsx)(n.strong,{children:"Fly-specific overrides"})," that will be applied"]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83d\udd10 ",(0,l.jsx)(n.strong,{children:"Admin credentials"})," that will be generated"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"4-deploy",children:"4. Deploy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Deploy with automatic .env reading\n./scripts/deployment/deploy_fly.sh\n\n# Or specify your own app name\n./scripts/deployment/deploy_fly.sh my-company-anomstack\n"})}),"\n",(0,l.jsx)(n.h3,{id:"5-access-your-instance",children:"5. Access Your Instance"}),"\n",(0,l.jsx)(n.p,{children:"After deployment completes:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcca Dashboard"}),": ",(0,l.jsx)(n.code,{children:"https://your-app-name.fly.dev/"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udd10 Admin UI"}),": ",(0,l.jsx)(n.code,{children:"https://your-app-name.fly.dev/dagster"})," (credentials shown after deploy)"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"manual-deployment",children:"Manual Deployment"}),"\n",(0,l.jsx)(n.p,{children:"For more control over the deployment process:"}),"\n",(0,l.jsx)(n.h3,{id:"1-create-flyio-app",children:"1. Create Fly.io App"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Replace 'my-anomstack' with your preferred app name\nfly apps create my-anomstack\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-set-up-database",children:"2. Set Up Database"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Create PostgreSQL cluster\nfly postgres create --name my-anomstack-db --region ord\n\n# Attach to your app (creates DATABASE_URL secret automatically)\nfly postgres attach my-anomstack-db -a my-anomstack\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-create-persistent-volume",children:"3. Create Persistent Volume"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Create 10GB volume for metrics data\nfly volumes create anomstack_data --region ord --size 10 -a my-anomstack\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-configure-secrets-optional",children:"4. Configure Secrets (Optional)"}),"\n",(0,l.jsx)(n.p,{children:"Set up alerts and integrations:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Email alerts\nfly secrets set \\\n  ANOMSTACK_ALERT_EMAIL_FROM="alerts@yourcompany.com" \\\n  ANOMSTACK_ALERT_EMAIL_TO="team@yourcompany.com" \\\n  ANOMSTACK_ALERT_EMAIL_PASSWORD="your-app-password" \\\n  -a my-anomstack\n\n# Slack alerts\nfly secrets set \\\n  ANOMSTACK_SLACK_BOT_TOKEN="xoxb-your-token" \\\n  ANOMSTACK_SLACK_CHANNEL="#anomalies" \\\n  -a my-anomstack\n\n# OpenAI integration (for LLM-powered alerts)\nfly secrets set \\\n  ANOMSTACK_OPENAI_KEY="sk-your-api-key" \\\n  -a my-anomstack\n'})}),"\n",(0,l.jsx)(n.h3,{id:"5-deploy",children:"5. Deploy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"fly deploy -a my-anomstack\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,l.jsx)(n.p,{children:"Our deployment uses several key configuration files:"}),"\n",(0,l.jsxs)(n.h3,{id:"flytoml---app-configuration",children:[(0,l.jsx)(n.code,{children:"fly.toml"})," - App Configuration"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'app = "my-anomstack"\nprimary_region = "ord"\n\n# Single container with startup script\n[[services]]\n  protocol = "tcp"\n  internal_port = 80  # nginx proxy port\n\n  [[services.ports]]\n    port = 80\n    handlers = ["http"]\n    force_https = true\n\n  [[services.ports]]\n    port = 443\n    handlers = ["tls", "http"]\n\n[mounts]\n  destination = "/data"\n  source = "anomstack_data"\n\n[vm]\n  memory = "2048"\n  cpu_kind = "shared"\n  cpus = 1\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"nginxconf---reverse-proxy-with-auth",children:[(0,l.jsx)(n.code,{children:"nginx.conf"})," - Reverse Proxy with Auth"]}),"\n",(0,l.jsx)(n.p,{children:"Key features:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Public routing"})," for dashboard at ",(0,l.jsx)(n.code,{children:"/"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Protected routing"})," for Dagster at ",(0,l.jsx)(n.code,{children:"/dagster"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Basic authentication"})," for admin features"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WebSocket support"})," for real-time updates"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"dagster_flyyaml---postgresql-configuration",children:[(0,l.jsx)(n.code,{children:"dagster_fly.yaml"})," - PostgreSQL Configuration"]}),"\n",(0,l.jsx)(n.p,{children:"Configured for:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"DATABASE_URL"})," from Fly.io PostgreSQL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"DefaultRunLauncher"})," (no Docker dependency)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Persistent storage"})," on mounted volume"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"customizing-your-deployment",children:"Customizing Your Deployment"}),"\n",(0,l.jsx)(n.h3,{id:"change-admin-credentials",children:"Change Admin Credentials"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Recommended Method - Using Fly Secrets (Secure):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Set custom admin credentials via Fly secrets\nfly secrets set \\\n  ANOMSTACK_ADMIN_USERNAME="youradmin" \\\n  ANOMSTACK_ADMIN_PASSWORD="your-secure-password-123" \\\n  -a my-anomstack\n\n# Restart the app to apply changes\nfly deploy -a my-anomstack\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Alternative Method - Via SSH (temporary):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# SSH into your app\nfly ssh console -a my-anomstack\n\n# Update password (temporary until next deployment)\nhtpasswd -bc /etc/nginx/.htpasswd admin newpassword\n\n# Restart nginx\npkill nginx && nginx -g "daemon off;" > /tmp/nginx.log 2>&1 &\n'})}),"\n",(0,l.jsx)(n.h3,{id:"add-custom-metrics",children:"Add Custom Metrics"}),"\n",(0,l.jsx)(n.p,{children:"After deployment, add your metric configurations:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"SSH into your app:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"fly ssh console -a my-anomstack\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Create metric configuration:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd /opt/dagster/app/metrics/\nnano my_metrics.yaml\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Add your configuration:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"metric_batch: 'my_company_metrics'\ningest_sql: |\n  SELECT \n    CURRENT_TIMESTAMP as metric_timestamp,\n    'revenue' as metric_name,\n    daily_revenue as metric_value\n  FROM my_table\n  WHERE date = CURRENT_DATE\n\ndata_source: 'bigquery'  # or your data source\nschedule: \"0 9 * * *\"    # Daily at 9 AM\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Hot reload configuration:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python scripts/reload_config.py\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"scale-your-deployment",children:"Scale Your Deployment"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Scale to multiple instances\nfly scale count 2 -a my-anomstack\n\n# Increase memory\nfly scale memory 4096 -a my-anomstack\n\n# Upgrade to dedicated CPU\nfly scale vm dedicated-cpu-1x -a my-anomstack\n"})}),"\n",(0,l.jsx)(n.h2,{id:"monitoring--maintenance",children:"Monitoring & Maintenance"}),"\n",(0,l.jsx)(n.h3,{id:"view-application-logs",children:"View Application Logs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# All services\nfly logs -a my-anomstack\n\n# Follow logs in real-time\nfly logs -a my-anomstack -f\n\n# Specific log files via SSH\nfly ssh console -a my-anomstack\ntail -f /tmp/webserver.log\ntail -f /tmp/dashboard.log\ntail -f /tmp/nginx.log\n"})}),"\n",(0,l.jsx)(n.h3,{id:"health-monitoring",children:"Health Monitoring"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check status\nfly status -a my-anomstack\n\n# View metrics\nfly metrics -a my-anomstack\n\n# Test endpoints\ncurl -I https://your-app.fly.dev/           # Dashboard (public)\ncurl -I https://your-app.fly.dev/dagster    # Should get 401\ncurl -I -u admin:anomstack2024 https://your-app.fly.dev/dagster  # Should get 200\n"})}),"\n",(0,l.jsx)(n.h3,{id:"database-management",children:"Database Management"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Connect to database\nfly postgres connect -a my-anomstack-db\n\n# View database status\nfly status -a my-anomstack-db\n\n# Create backup\nfly postgres backup my-anomstack-db\n"})}),"\n",(0,l.jsx)(n.h2,{id:"storage--data-management",children:"Storage & Data Management"}),"\n",(0,l.jsx)(n.h3,{id:"persistent-volumes",children:"Persistent Volumes"}),"\n",(0,l.jsx)(n.p,{children:"Your data persists across deployments in the mounted volume:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# View volume usage\nfly ssh console -a my-anomstack -c "df -h /data"\n\n# List volumes\nfly volumes list -a my-anomstack\n\n# Extend volume size\nfly volumes extend <volume-id> --size 20 -a my-anomstack\n'})}),"\n",(0,l.jsx)(n.h3,{id:"data-backup",children:"Data Backup"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Backup DuckDB database\nfly ssh console -a my-anomstack\ncp /data/anomstack.db /tmp/backup.db\n# Download via scp or upload to cloud storage\n\n# Backup model files\ntar -czf /tmp/models_backup.tar.gz /data/models/\n"})}),"\n",(0,l.jsx)(n.h2,{id:"cost-optimization",children:"Cost Optimization"}),"\n",(0,l.jsx)(n.h3,{id:"resource-planning",children:"Resource Planning"}),"\n",(0,l.jsx)(n.p,{children:"Typical monthly costs for different workloads:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Workload"}),(0,l.jsx)(n.th,{children:"Memory"}),(0,l.jsx)(n.th,{children:"CPU"}),(0,l.jsx)(n.th,{children:"Storage"}),(0,l.jsx)(n.th,{children:"PostgreSQL"}),(0,l.jsx)(n.th,{children:"Est. Cost/Month*"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:[(0,l.jsx)(n.strong,{children:"Light"})," (10 metrics)"]}),(0,l.jsx)(n.td,{children:"1GB"}),(0,l.jsx)(n.td,{children:"shared-cpu-1x"}),(0,l.jsx)(n.td,{children:"10GB"}),(0,l.jsx)(n.td,{children:"1 CPU"}),(0,l.jsx)(n.td,{children:"$15-25"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:[(0,l.jsx)(n.strong,{children:"Medium"})," (100 metrics)"]}),(0,l.jsx)(n.td,{children:"2GB"}),(0,l.jsx)(n.td,{children:"shared-cpu-2x"}),(0,l.jsx)(n.td,{children:"25GB"}),(0,l.jsx)(n.td,{children:"1 CPU"}),(0,l.jsx)(n.td,{children:"$35-50"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:[(0,l.jsx)(n.strong,{children:"Heavy"})," (1000+ metrics)"]}),(0,l.jsx)(n.td,{children:"4GB"}),(0,l.jsx)(n.td,{children:"dedicated-cpu-1x"}),(0,l.jsx)(n.td,{children:"100GB"}),(0,l.jsx)(n.td,{children:"2 CPU"}),(0,l.jsx)(n.td,{children:"$75-120"})]})]})]}),"\n",(0,l.jsxs)(n.p,{children:["*Estimates based on Fly.io pricing. Check ",(0,l.jsx)(n.a,{href:"https://fly.io/docs/about/pricing/",children:"fly.io/docs/about/pricing"})," for current rates."]}),"\n",(0,l.jsx)(n.h3,{id:"optimization-tips",children:"Optimization Tips"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Start small"}),": Begin with 1GB RAM and scale up as needed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Monitor usage"}),": Use ",(0,l.jsx)(n.code,{children:"fly metrics"})," to track resource consumption"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Optimize schedules"}),": Reduce frequency for less critical metrics"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use efficient queries"}),": Optimize your metric ingestion SQL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Clean up data"}),": Regularly archive old metrics if not needed"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,l.jsx)(n.h4,{id:"services-not-starting",children:"Services Not Starting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check startup logs\nfly logs -a my-anomstack\n\n# Check individual service logs\nfly ssh console -a my-anomstack\ncat /tmp/webserver.log\ncat /tmp/daemon.log\ncat /tmp/dashboard.log\ncat /tmp/nginx.log\n"})}),"\n",(0,l.jsx)(n.h4,{id:"authentication-not-working",children:"Authentication Not Working"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Test auth manually\ncurl -I https://your-app.fly.dev/dagster  # Should return 401\ncurl -I -u admin:anomstack2024 https://your-app.fly.dev/dagster  # Should return 200\n\n# Check nginx config\nfly ssh console -a my-anomstack\ncat /etc/nginx/.htpasswd\nnginx -t  # Test configuration\n"})}),"\n",(0,l.jsx)(n.h4,{id:"database-connection-issues",children:"Database Connection Issues"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Test DATABASE_URL\nfly ssh console -a my-anomstack\necho $DATABASE_URL\npython -c \"\nfrom sqlalchemy import create_engine\nengine = create_engine('$DATABASE_URL')\nprint('Database connection successful!')\n\"\n"})}),"\n",(0,l.jsx)(n.h4,{id:"volumestorage-issues",children:"Volume/Storage Issues"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check disk usage\nfly ssh console -a my-anomstack\ndf -h\n\n# Check volume mounts\nmount | grep /data\n\n# Test DuckDB access\npython -c \"\nimport duckdb\nconn = duckdb.connect('/data/anomstack.db')\nprint('DuckDB connection successful!')\n\"\n"})}),"\n",(0,l.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"High Memory Usage"}),": Scale up with ",(0,l.jsx)(n.code,{children:"fly scale memory 4096"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Slow Queries"}),": Optimize your metric ingestion SQL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Database Bottlenecks"}),": Upgrade PostgreSQL instance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Network Issues"}),": Consider multi-region deployment"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"multi-region-deployment",children:"Multi-Region Deployment"}),"\n",(0,l.jsx)(n.p,{children:"Deploy globally for better performance:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# fly.toml\n[scaling]\n  regions = ["ord", "lhr", "nrt"]  # Chicago, London, Tokyo\n  min_machines_running = 1\n  max_machines_running = 5\n'})}),"\n",(0,l.jsx)(n.h3,{id:"custom-domains",children:"Custom Domains"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Add custom domain\nfly certs create anomalies.yourcompany.com -a my-anomstack\n\n# Verify DNS configuration\nfly certs show anomalies.yourcompany.com -a my-anomstack\n"})}),"\n",(0,l.jsx)(n.h3,{id:"external-data-sources",children:"External Data Sources"}),"\n",(0,l.jsx)(n.p,{children:"Configure connections to your data sources:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# BigQuery\nfly secrets set GOOGLE_APPLICATION_CREDENTIALS_JSON=\'{"type":"service_account"...}\' -a my-anomstack\n\n# Snowflake\nfly secrets set \\\n  ANOMSTACK_SNOWFLAKE_ACCOUNT="your-account" \\\n  ANOMSTACK_SNOWFLAKE_USERNAME="your-username" \\\n  ANOMSTACK_SNOWFLAKE_PASSWORD="your-password" \\\n  -a my-anomstack\n\n# AWS (for S3 or other services)\nfly secrets set \\\n  AWS_ACCESS_KEY_ID="your-key" \\\n  AWS_SECRET_ACCESS_KEY="your-secret" \\\n  -a my-anomstack\n'})}),"\n",(0,l.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,l.jsx)(n.h3,{id:"from-docker-compose",children:"From Docker Compose"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Export your data:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Backup DuckDB and configs\ndocker cp anomstack_code_1:/opt/dagster/app/data/anomstack.db ./backup.db\ndocker cp anomstack_code_1:/opt/dagster/app/metrics/ ./metrics_backup/\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Deploy to Fly.io:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"fly deploy\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Upload your data:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"fly ssh console -a my-anomstack\n# Upload backup.db to /data/\n# Upload metric configs to /opt/dagster/app/metrics/\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Reload configuration:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python scripts/reload_config.py\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"from-other-platforms",children:"From Other Platforms"}),"\n",(0,l.jsx)(n.p,{children:"The same general approach works:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Export data and configuration"}),"\n",(0,l.jsx)(n.li,{children:"Deploy to Fly.io"}),"\n",(0,l.jsx)(n.li,{children:"Import data via SSH"}),"\n",(0,l.jsx)(n.li,{children:"Test and verify"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsx)(n.p,{children:"After successful deployment:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udd27 Configure Metrics"}),": Add your custom metric batches"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udce7 Set Up Alerts"}),": Configure email/Slack notifications"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcca Monitor Performance"}),": Use Fly.io metrics and Dagster UI"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u26a1 Scale as Needed"}),": Adjust resources based on usage"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udd12 Security"}),": Update default passwords and review access"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcd6 Documentation"}),": Document your specific metric configurations"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"related-resources",children:"Related Resources"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcc1 Quick Reference"}),": ",(0,l.jsx)(n.a,{href:"https://github.com/andrewm4894/anomstack/blob/main/fly.md",children:"fly.md"})," in repository root"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83c\udf10 Fly.io Docs"}),": ",(0,l.jsx)(n.a,{href:"https://fly.io/docs",children:"fly.io/docs"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcac Community"}),": ",(0,l.jsx)(n.a,{href:"https://community.fly.io",children:"community.fly.io"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udc1b Issues"}),": ",(0,l.jsx)(n.a,{href:"https://github.com/andrewm4894/anomstack/issues",children:"GitHub Issues"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udce7 Alerts Setup"}),": ",(0,l.jsx)(n.a,{href:"/anomstack/docs/features/alerts",children:"Email Configuration"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\ud83d\udcac Slack Setup"}),": ",(0,l.jsx)(n.a,{href:"/anomstack/docs/features/alerts",children:"Slack Integration"})]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"Questions?",type:"info",children:(0,l.jsxs)(n.p,{children:["Join our ",(0,l.jsx)(n.a,{href:"https://github.com/andrewm4894/anomstack/discussions",children:"GitHub Discussions"})," or file an issue for deployment help!"]})}),"\n",(0,l.jsx)(n.h2,{id:"smart-environment-variable-management",children:"Smart Environment Variable Management"}),"\n",(0,l.jsxs)(n.p,{children:["The deployment script intelligently handles your ",(0,l.jsx)(n.code,{children:".env"})," file with smart filtering:"]}),"\n",(0,l.jsx)(n.h3,{id:"-automatic-filtering",children:"\ud83e\udde0 Automatic Filtering"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Variables that are SKIPPED (local development only):"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ANOMSTACK_DUCKDB_PATH=tmpdata/..."})," - Local file paths"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ANOMSTACK_SQLITE_PATH=tmpdata/..."})," - Local file paths"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ANOMSTACK_MODEL_PATH=./tmp/..."})," - Local model storage"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ANOMSTACK_HOME=."})," - Current directory reference"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ANOMSTACK_POSTGRES_FORWARD_PORT"})," - Local port forwarding"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DAGSTER_CODE_SERVER_HOST=anomstack_code"})," - Docker Compose specific"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ANOMSTACK_DASHBOARD_PORT"})," - Local dashboard port"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Variables that are DEPLOYED:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"API keys and tokens (OpenAI, Anthropic, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Email and Slack credentials"}),"\n",(0,l.jsx)(n.li,{children:"Database connection strings"}),"\n",(0,l.jsx)(n.li,{children:"Admin authentication settings"}),"\n",(0,l.jsx)(n.li,{children:"Alert configuration"}),"\n",(0,l.jsx)(n.li,{children:"Cloud storage credentials"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"-flyio-overrides",children:"\ud83d\udd12 Fly.io Overrides"}),"\n",(0,l.jsxs)(n.p,{children:["These values are automatically set for Fly.io deployment (regardless of your ",(0,l.jsx)(n.code,{children:".env"}),"):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'DAGSTER_HOME="/opt/dagster/dagster_home"\nDAGSTER_CODE_SERVER_HOST="localhost"\nANOMSTACK_DUCKDB_PATH="/data/anomstack.db"           # Persistent volume\nANOMSTACK_MODEL_PATH="local:///data/models"          # Persistent volume  \nANOMSTACK_TABLE_KEY="metrics"                        # Simplified table key\nANOMSTACK_IGNORE_EXAMPLES="no"                       # Enable examples\nPYTHONPATH="/opt/dagster/app"                        # Container path\n'})}),"\n",(0,l.jsx)(n.h3,{id:"-security-features",children:"\ud83d\udd10 Security Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sensitive values are masked"})," in preview mode (",(0,l.jsx)(n.code,{children:"***MASKED***"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Secrets are set via Fly's secure secret management"})," (not environment variables)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Admin credentials are generated securely"})," (random password if not provided)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Local-only variables are never sent"})," to the cloud"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"-usage-examples",children:"\ud83d\udca1 Usage Examples"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Preview what will be deployed\n./scripts/deployment/preview_fly_secrets.sh\n\n# Example output:\n# \u2705 8 variables will be set as Fly secrets:\n#   ANOMSTACK_ALERT_EMAIL_FROM=alerts@company.com\n#   ANOMSTACK_ALERT_EMAIL_TO=team@company.com\n#   ANOMSTACK_ALERT_EMAIL_PASSWORD=***MASKED***\n#   ANOMSTACK_OPENAI_KEY=***MASKED***\n#   ...\n#\n# \ud83c\udfe0 4 variables will be SKIPPED (local development only):\n#   ANOMSTACK_DUCKDB_PATH\n#   ANOMSTACK_DASHBOARD_PORT\n#   ...\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var i=s(6540);const l={},r=i.createContext(l);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);