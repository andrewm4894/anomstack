# default values to be applied to all batches unless overridden in metric batch specific yaml files.
db: "duckdb" # database type to use.
table_key: "tmp.metrics" # table to store metrics in.
model_path: "local://./models" # path to where models are to be stored.
# model_path: "gs://your-bucket/models" # gcs path to where models are to be stored.
# model_path: "s3://your-bucket/models" # s3 path to where models are to be stored.
# model configs to pass to PyOD
model_config:
  model_name: 'PCA'
  model_params:
    contamination: 0.01
disable_batch: False # if you want to disable a metric batch for some reason.
train_max_n: 1000 # max number of observations for training a model.
train_min_n: 14 # min number of observations for training a model.
score_max_n: 20 # max n to pull for scoring to avoid pulling more than needed.
alert_max_n: 60 # max n to include and plot in an alert.
alert_metric_timestamp_max_days_ago: 1 # don't alert on metrics older than this.
alert_recent_n: 5 # only alert on recent n so as to avoid continually alerting.
alert_smooth_n: 3 # smooth anomaly score over rolling n to avoid being too trigger happy.
alert_threshold: 0.8 # threshold for smoothed anomaly score above which to alert on.
alert_always: False # if True, always send alerts, even if no anomalies.
alert_methods: "email" # comma separated list of alert methods to use eg "email,slack".
preprocess_fn: >
  {% include "./defaults/python/preprocess.py" %}
preprocess_params:
  diff_n: 1 # 1 will use diff, 0 will use raw metric values.
  smooth_n: 3 # how much smoothing to apply in preprocessing.
  lags_n: 5 # how many lags to include in feature vector.
ingest_cron_schedule: "*/3 * * * *" # cron schedule for ingest jobs
ingest_default_schedule_status: 'STOPPED' # default schedule status for ingest jobs (RUNNING or STOPPED)
train_cron_schedule: "*/5 * * * *" # cron schedule for training jobs
train_default_schedule_status: 'STOPPED' # default schedule status for train jobs (RUNNING or STOPPED)
score_cron_schedule: "*/4 * * * *" # cron schedule for scoring jobs
score_default_schedule_status: 'STOPPED' # default schedule status for score jobs (RUNNING or STOPPED)
alert_cron_schedule: "*/5 * * * *" # cron schedule for alerting jobs
alert_default_schedule_status: 'STOPPED' # default schedule status for alert jobs (RUNNING or STOPPED)
# default templated train sql
train_sql: >
  {% include "./defaults/sql/train.sql" %}
# default templated score sql
score_sql: >
  {% include "./defaults/sql/score.sql" %}
# default templated alert sql
alert_sql: >
  {% include "./defaults/sql/alerts.sql" %}
